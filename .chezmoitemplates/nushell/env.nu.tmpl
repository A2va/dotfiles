{{- if and (has "rustup" .software_checks) (eq .chezmoi.os "linux") }}
source $"($nu.home-path)/.cargo/env.nu"
{{- end }}

{{- if has "carapace" .software_checks}}
mkdir ~/.cache/uv
uv generate-shell-completion nushell |   save -f ~/.cache/uv/init.nu
{{- end }}

{{- if has "carapace" .software_checks}}
$env.CARAPACE_BRIDGES = 'zsh,fish,bash,inshellisense' # optional
mkdir ~/.cache/carapace
carapace _carapace nushell | save --force ~/.cache/carapace/init.nu
{{- end }}

{{- if has "starship" .software_checks}}
mkdir ~/.cache/starship
starship init nu | save -f ~/.cache/starship/init.nu
{{- end }}

{{- if has "zoxide" .software_checks}}
mkdir ~/.cache/zoxide
zoxide init nushell | save -f ~/.cache/zoxide/init.nu
{{- end }}